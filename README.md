# U-GCCT
Universal Game Charactor Code Tools

レトロゲーム等に見られる独自のテキストコードを解析するための簡易ツールです。
csvファイルにゲームの文字コードの定義を記述し、変換します。

用途としてはゲームのテキストの解析や、専用のテキストコンバータを作成する前のプロトタイプ作成等を想定しています。

todo: english description

# Tools
## MessageDumper3
文字コード定義ファイル(csv)とROMデータを与えると人が読めるテキストファイルを出力するツールです。

※出力は人間が読めることのみを目的としており、逆変換できるフォーマットではありません。

### usage
```
> python MessageDumper3.py game-code-def.csv game-file.rom
```

## GameTextGenerator
文字コード定義ファイル(csv)とテキストを与えるとゲーム用のテキストデータのバイナリ列を出力します。

※このツールによる変換は1文字づつ対応するテキストコードを出力するものであり、複数文字から構成されるデータを生成することはできません。

FF6の例：'字' → 1d 76の変換は可能ですが、'ケフカ「' → E2の変換はできません。一字ずつ変換して1F 70 1F 64 1F 6A 1F D0を出力します。

### usage
```
> python GameTextGenerator.py game-code-def.csv to-convert-text
```

# CSV format
文字コード定義ファイル(csv)のフォーマットは次のようになります。

```csv
REM,コメント
START,変換を開始するファイルの位置
END,変換を終了するファイルの位置
ゲーム内テキストコード,文字列
ゲーム内テキストコード,文字列
...
```

例：
```
REM, GAME: MADARA(FC)
START,0x0000800F
END,0x0003BF77
13,あ
14,い
15,う
16,え
17,お
...
```

## 仕様
+ ゲーム内テキストコードは偶数桁の16進数です。奇数桁はNGです。
+ テキストコードに対応する文字列はUTF-8である必要があります。
+ 文字列には次の特殊文字列が存在します。

## 特殊文字列
特殊文字列の説明を次に示します。具体的な使い方はcsvディレクトリの定義ファイルを実際にご覧ください。

### [NULL]
+ 文字列の終端文字を意味します。
+ 終端が現れるとMessageDumperは3回改行した後終端文字の次のアドレスを出力します。
+ 例：
	```
	0x000082B3:
	SOUND  MODE


	0x000082BF:
	GAME  LEVEL
	```

### [\n]
+ 改行文字を意味します。

### [SP]
+ 半角スペースを意味します

### [PRESS A]
+ テキスト送りを待つコードであることを示します。
+ これが現れるとMessageDumperは[PRESS A]を表示して改行します。

### [SEQ]
+ このコードと次に現れるコードの組み合わせで1文字になることを示します。
+ 例：
	+ 1F D8が'板'、1F D9が'征'とすると文字コード定義は次のようになります。
	```
	1F,[SEQ]
	1FD8,板
	1FD9,征
	```

### [CMD]
+ 何らかのコマンドコードを意味します。
+ [CMD]の後ろにコマンドの説明を書くことができます。
+ 定義ファイル例：
	```
	12,[CMD]自動送り
	```
+ 出力例：
	```
	0x000E2A3B:
	ちくしょう　ちくしょう　ちくしょう

	ちくしょう　ちくしょう　ちくしょう
	　[CMD 自動送り]
	```

### [CMD_Wn]
+ 何らかのコマンドコードを意味します。
+ [CMD_Wの後ろにコマンドの引数のバイト数を記述します。
+ [CMD_Wn]の後ろにコマンドの説明を書くことができます。
+ 定義ファイル例：
	```
	12,[CMD]自動送り
	16,[CMD_W1]LONG_WAIT2
	```
+ 出力例：
	```
	「魔大戦で氷づけになった1000年前
	　の幻獣か…　[CMD LONG_WAIT2, Arg: 18][CMD 自動送り]
	```

----
Programmed by RGBA_CRT 2014-2021  
Project url: https://github.com/RGBA-CRT/U-GCCT